<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <title>Configurações - Regulador MV</title>
    <link rel="stylesheet" href="options.css" />
  </head>
  <body>
    <h1>Configurações</h1>

    <fieldset class="settings-section">
      <legend>Geral</legend>
      <form id="settings-form">
        <div class="form-group">
          <label for="itemsPerPage">Itens por página nas tabelas:</label>
          <input type="number" id="itemsPerPage" name="itemsPerPage" min="5" max="50" />
        </div>
        <div class="form-group">
          <label for="prontuarioPeriodoPadrao"
            >Período padrão para análise de prontuário:</label
          >
          <select id="prontuarioPeriodoPadrao" name="prontuarioPeriodoPadrao">
            <option value="last_6_months">Últimos 6 meses</option>
            <option value="last_year" selected>Último ano</option>
            <option value="all_time">Todo o período</option>
          </select>
        </div>
        <button type="submit">Guardar Gerais</button>
      </form>
    </fieldset>

    <fieldset class="settings-section">
      <legend>Gerenciador de Tags Clínicas</legend>
      <div id="tag-builder">
        <div class="form-group">
          <label for="tagName">Nome da Nova Tag (ou editar existente):</label>
          <input
            type="text"
            id="tagName"
            placeholder="Ex: Hipertenso, Risco Cardiovascular"
          />
        </div>
        <div class="form-group">
          <label for="tagCodeSearch">Pesquisar Códigos (CID10/CIAP2):</label>
          <input
            type="text"
            id="tagCodeSearch"
            placeholder="Pesquise por nome ou código (ex: diabetes, I10, z000)"
          />
          <!-- Container para os resultados da pesquisa e botões de ação -->
          <div id="search-container" class="search-container">
            <div id="code-search-results"></div>
            <div id="search-actions" class="search-actions" style="display: none">
              <div class="selection-toggles">
                <button type="button" id="selectAllBtn" class="link-button">
                  Selecionar Todos
                </button>
                <span>|</span>
                <button type="button" id="deselectAllBtn" class="link-button">
                  Limpar Seleção
                </button>
              </div>
              <div class="main-actions">
                <button id="addSelectedBtn" type="button">
                  Adicionar Selecionados
                </button>
                <button id="clearSearchBtn" type="button" class="secondary">
                  Limpar Busca
                </button>
              </div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <label>Códigos Associados a esta Tag:</label>
          <div id="associated-codes" class="pills-container">
            <!-- Pills dos códigos selecionados aparecerão aqui -->
          </div>
        </div>
        <button id="addTagBtn" type="button">Guardar Tag</button>
      </div>
    </fieldset>

    <fieldset class="settings-section">
      <legend>Tags Salvas</legend>
      <div id="tag-list">
        <!-- Lista de tags salvas aparecerá aqui -->
      </div>
    </fieldset>

    <div id="status"></div>

    <div class="feedback-section">
      <h2>Feedback & Suporte</h2>
      <p>Encontrou um problema ou tem uma sugestão? Ajude a melhorar a extensão!</p>
      <a
        href="https://github.com/BugCheckBr/mvRegulador/issues"
        target="_blank"
        class="feedback-link"
        >Reportar um Problema ou Sugerir Melhoria</a
      >
    </div>

    <script type="module" src="options.js"></script>
  </body>
</html>
